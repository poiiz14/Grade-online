/* Variables for consistency */
:root {
  --safe-tap: 44px;
}

/* Tap targets: ensure touch-friendly controls */
button,
.btn,
input,
select,
textarea {
  min-height: var(--safe-tap);
}

/* Tabs (แก้ selector .semester-tab ให้ถูกต้อง) */
.tab-btn,
.semester-tab {
  position: relative;
  padding: .875rem .25rem;
  color: #475569;
  border-bottom: 2px solid transparent;
  transition: color .15s ease, border-color .15s ease, background-color .15s ease;
}

/* Card shadow (แก้ rgba ให้ถูก) */
.card-shadow {
  box-shadow: 0 8px 24px rgba(2,6,23,.06), 0 2px 6px rgba(2,6,23,.04);
  border: 1px solid rgba(2,6,23,.06);
  border-radius: 1rem;
}

/* Loading overlay (แก้ rgba ให้ถูก) */
.loading-overlay {
  position: fixed;
  inset: 0;
  z-index: 60;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(0,0,0,.35);
  animation: fadeIn .12s ease;
}

#loadingBar { width: 0%; } /* ค่าเริ่มต้น */

.loading-panel {
  background: #fff;
  padding: 1.25rem 1.5rem;
  border-radius: .875rem;
  box-shadow: 0 10px 30px rgba(2,6,23,.18);
  display: flex;
  flex-direction: column;
  align-items: center;
  min-width: 200px;
  animation: pop .12s ease;
}

/* Loading brand + logo pulse */
.loading-logo {
  width: 40px;
  height: 40px;
  opacity: .95;
  filter: drop-shadow(0 2px 6px rgba(2,6,23,.12));
}

.loading-brand {
  animation: pulse 1.8s ease-in-out infinite;
}

@keyframes pulse {
  0%, 100% { transform: scale(1); }
  50%      { transform: scale(1.06); }
}

/* Progress bar */
.progress {
  width: 220px;
  height: 6px;
  border-radius: 999px;
  background: #eef2ff;
  overflow: hidden;
  margin-top: .75rem; /* เว้นจากข้อความโหลด */
}

.progress-bar {
  height: 100%;
  background: linear-gradient(90deg, #60a5fa, #2563eb);
  width: 0%;
  transition: width .25s ease;
}

/* โหมด indeterminate */
.progress[data-mode="indeterminate"] .progress-bar {
  width: 40%;
  animation: indet 1.2s ease-in-out infinite;
}

@keyframes indet {
  0%   { transform: translateX(-100%); }
  50%  { transform: translateX(20%); }
  100% { transform: translateX(140%); }
}

/* Charts responsive height */
.chart-box {
  height: 260px;
  position: relative;
}

@media (max-width: 640px) {
  .chart-box {
    height: 220px;
  }
}

/* Animation */
@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes pop {
  from { transform: scale(.96); opacity: .6; }
  to { transform: scale(1); opacity: 1; }
}

/* Safe area for iPhone notch */
body {
  padding-top: env(safe-area-inset-top);
  padding-bottom: env(safe-area-inset-bottom);
}

header.sticky {
  top: env(safe-area-inset-top);
}

/* Loading overlay helpers restored */
.loading-overlay.hidden { display: none; }

/* Spinner (วงกลมหมุน) */
.spinner{
  width: 28px; height: 28px;
  border-radius: 50%;
  border: 3px solid #e5e7eb; /* base ring */
  border-top-color: #2563eb; /* primary color */
  animation: spin .9s linear infinite;
}

/* Keyframe สำหรับสปินเนอร์ */
@keyframes spin { to { transform: rotate(360deg); } }

/* Optional: ลด motion สำหรับผู้ใช้ที่ตั้งค่า reduce motion */
@media (prefers-reduced-motion: reduce) {
  .loading-brand { animation: none; }
  .spinner { animation-duration: 1.4s; }
  .progress[data-mode="indeterminate"] .progress-bar {
    animation: none;
    width: 100%;
  }
}

